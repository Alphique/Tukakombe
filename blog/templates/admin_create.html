{% extends "blog_base.html" %}
{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<h1>Blog Admin Dashboard</h1>

<section>
    <h2>Create New Blog</h2>
    <form method="POST" action="{{ url_for('blog_admin.blog_create') }}">
        <input type="text" name="title" placeholder="Blog Title" required><br>
        <textarea name="content" rows="6" placeholder="Blog Content" required></textarea><br>
        <button type="submit">Create Blog</button>
    </form>
</section>

<hr>
<section>
    <h2>Manage Blogs</h2>
    <ul>
        {% for blog in blogs %}
        <li>
            <strong>{{ blog['title'] }}</strong> | Posted on {{ blog['created_at'] }}
            <a href="{{ url_for('blog_admin.delete_blog', blog_id=blog['id']) }}">Delete</a>
        </li>
        {% else %}
        <li>No blogs created yet.</li>
        {% endfor %}
    </ul>
</section>

<hr>
<section>
    <h2>Manage Comments</h2>
    <ul>
        {% for comment in comments %}
        <li>
            <strong>{{ comment['user_email'] }}</strong> on Blog ID {{ comment['blog_id'] }}: {{ comment['content'] }}
            <a href="{{ url_for('blog_admin.delete_comment', comment_id=comment['id']) }}">Delete</a>
        </li>
        {% else %}
        <li>No comments yet.</li>
        {% endfor %}
    </ul>
</section>
{% endblock %}
